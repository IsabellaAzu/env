
Rails4: fields_forとstrong_parametersで複数レコードの更新に対応する方法
http://319ring.net/blog/archives/2591
「fields_forで作った要素をstrong_parametersで許可したいんだがなー…。配列じゃなくて…。」

view  
```
- model_class = Hoge
= form_tag update_enable_list_hoges_path, method: :put do
  table
    thead
      tr
        th = model_class.human_attribute_name(:id)
        th = model_class.human_attribute_name(:name)
        th 有効フラグ
    tbody
      - @hoges.each do |hoge|
        = fields_for('hoges[]', hoge, index: nil) do |fh|
          tr
            td = hoge.id
            td = hoge.name
            td
              = fh.check_box :enable
              = fh.hidden_field :id
  .form-actions
    = submit_tag '更新'
```

controller  
```
class HogesController < ApplicationController
  # 省略
 
  private
  def hoge_params
    # 通常のcreate, updateで呼ばれるほう
  end
 
  def hoges_params
    params.require(:hoges).map do |param|
      ActionController::Parameters.new(param.to_hash).permit(:id, :enable)
    end
  end
end
```




