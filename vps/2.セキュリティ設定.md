# 2.セキュリティ設定

## ssh接続
```cmd
$ ssh root@IPアドレス
```

### エラー → 「ssh: connect to host xxx.xxx.xxx.xxx port xxx: Operation timed out」
coreOSは初期設定でネットワーク周りが設定されていない
　  
### coreOSのSSH接続のための変更
#### IPアドレスとサブネットマスクを設定
```cmd
# コントロールパネルに記載の値を設定する
$ sudo ifconfig eth0 xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx
$ sudo route add default gw xxx.xxx.xxx.xxx
# とりあえず空のcloud-config.ymlを用意（ファイル先頭に「#cloud-config」を記載する）してcoreOSをインストール
$ sudo coreos-install -d /dev/vda -C stable -c cloud-config.yml
# 下記表示で成功
　→　/bin/coreos-install: Image URL unavailable: http://stable.release.core-os.net/amd64-usr/444.5.0/coreos_production_image.bin.bz2

# coreOSにログインしている「core」アカウントのパスワード変更
$ sudo passwd core
　→　変更したいパスワードに変更しておく
```
#### iTerm2でssh接続してみる
```
$ ssh core@xxx.xxx.xxx.xxx
# つながったらコンソールとｸﾞｯﾊﾞｲ＼(^0^)／
```
#### 参考
http://automation-wb.blogspot.jp/2016/03/vpscoreos.html  
http://qiita.com/blackle0pard_/items/f7aea750856ee0867905  

   
- - - 
　  
## 初期設定の変更
cloud-config.ymlで上書きする  

### cloud-config.yml
CoreOSインストール及び設定ファイルを変更する際に必要な基本設定を記述した設定ファイル。  
主に、サーバーの環境変数、NIC/IPの設定、etcdクラスタ設定、Unit(systemd)起動設定など。  
CoreOS起動時に「/usr/bin/coreos-cloudinit」が呼び出される  

### 格納場所

#### CoreOSインストール時に使ったcloud-configはどこに行ったの？()
/var/lib/coreos-install/user_data

#### プラットフォーム固有の設定
/usr/share/oem/cloud-config.yml  
https://coreos.com/os/docs/latest/notes-for-distributors.html  
　  
- - - 
